!function($){"use strict";const page=WDS.page_name;if("auth/verify"!=page){var validator,form=document.querySelector("#wds_auth_form"),btn=document.querySelector("#wds_auth_submit");if("auth/lost-password"==page)var name="lostpass";else if("auth/reset-password"==page)var name="resetpass";else var name="login";KTUtil.onDOMContentLoaded((function(){handleValidation(),handleSubmit()}))}function validatePassword(){return KTPasswordMeter.getInstance(form.querySelector('[data-kt-password-meter="true"]')).getScore()>50}function handleValidation(){var fields={email:{validators:{regexp:{regexp:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:WDS.text.error.email_invalid},notEmpty:{message:WDS.text.error.email_required}}},password:{validators:{notEmpty:{message:WDS.text.error.password_required}}},new_password:{validators:{notEmpty:{message:WDS.text.error.password_required},callback:{message:WDS.text.error.password_invalid,callback:function(input){if(input.value.length>0)return validatePassword()}}}},confirm_password:{validators:{notEmpty:{message:WDS.text.error.password_confirm_required},identical:{compare:function(){return form.querySelector('[name="new_password"]').value},message:WDS.text.error.password_confirm_error}}}};validator=initValidation(form,fields,{new_password:!1}),"/auth/reset-password/"==page&&form.querySelector('input[name="new_password"]').addEventListener("input",(function(){this.value.length>0&&validator.updateFieldStatus("new_password","NotValidated")}))}function handleSubmit(){btn.addEventListener("click",(function(e){e.preventDefault(),validator.validate().then((function(status){if("Valid"==status){var formData=new FormData(form);disableButton(btn),run_ajax(name,formData,(function(response){const message=response.data&&response.data.message?response.data.message:response.data;response.success?(form.reset(),"auth/login"===page?location.href=WDS.url.loginRedirect:run_ajax_success(message).then(result=>{result.isConfirmed&&(location.href=WDS.url.login)})):run_ajax_error(message),resetButton(btn)}))}else run_ajax_error(WDS.text.error.input)}))}))}}(jQuery);